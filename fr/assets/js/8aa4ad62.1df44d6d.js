"use strict";(globalThis.webpackChunk_w5s_website=globalThis.webpackChunk_w5s_website||[]).push([[9326],{404(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"packages/task/running-tasks","title":"Running Tasks","description":"Executing tasks and handling cancellation","source":"@site/docs/packages/3-task/running-tasks.mdx","sourceDirName":"packages/3-task","slug":"/packages/task/running-tasks","permalink":"/std/fr/docs/packages/task/running-tasks","draft":false,"unlisted":false,"editUrl":"https://github.com/w5s/std.git/tree/main/apps/website/docs/packages/3-task/running-tasks.mdx","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Composing Tasks","permalink":"/std/fr/docs/packages/task/composing-tasks"},"next":{"title":"Cancelling Tasks","permalink":"/std/fr/docs/packages/task/cancelling-tasks"}}');var t=s(1085),r=s(1184),i=s(2940);const l={sidebar_position:3},o="Running Tasks",c={},d=[{value:"Overview",id:"overview",level:2},{value:"Task.run",id:"taskrun",level:2},{value:"Cancellation",id:"cancellation",level:2},{value:"Using task.run() Method",id:"using-taskrun-method",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Keep Task.run at the Edge",id:"keep-taskrun-at-the-edge",level:3},{value:"Handle Both Result Cases",id:"handle-both-result-cases",level:3},{value:"FAQ",id:"faq",level:2}];function u(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"running-tasks",children:"Running Tasks"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Executing tasks and handling cancellation"}),"\n"]}),"\n",(0,t.jsx)(i.n,{apiHref:"/api/task/namespace/task"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Tasks are lazy - they don't execute until explicitly run. This section covers how to execute tasks and handle cancellation."}),"\n",(0,t.jsx)(n.h2,{id:"taskrun",children:"Task.run"}),"\n",(0,t.jsx)(n.p,{children:"The primary way to execute a task:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\nimport { Result } from '@w5s/core';\n\nconst myTask = Task.resolve(42);\n\n// Run and get the result\nconst result = await Task.run(myTask);\n\nif (Result.isOk(result)) {\n  console.log('Success:', result.value);\n} else {\n  console.error('Error:', result.error);\n}\n"})}),"\n",(0,t.jsx)(n.h2,{id:"cancellation",children:"Cancellation"}),"\n",(0,t.jsxs)(n.p,{children:["Tasks can be cancelled by passing a canceler reference to ",(0,t.jsx)(n.code,{children:"Task.run"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\nimport { Ref } from '@w5s/core';\n\n// Create a canceler reference\nconst controller = new AbortController();\n\n// Run with canceler\nconst resultPromise = Task.run(myTask, { signal: controller.signal });\n\n// Cancel the task\ncontroller.abort();\n"})}),"\n",(0,t.jsxs)(n.p,{children:["For detailed information on making tasks cancellable and advanced patterns, see ",(0,t.jsx)(n.a,{href:"/std/fr/docs/packages/task/cancelling-tasks",children:"Cancelling tasks"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"using-taskrun-method",children:"Using task.run() Method"}),"\n",(0,t.jsxs)(n.p,{children:["Tasks also have a ",(0,t.jsx)(n.code,{children:"run"})," method for convenience:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\n\nconst myTask = Task.create(() => Task.ok(42));\n\n// Direct method call\nconst result = await myTask.run();\n"})}),"\n",(0,t.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.h3,{id:"keep-taskrun-at-the-edge",children:"Keep Task.run at the Edge"}),(0,t.jsxs)(n.p,{children:["Place ",(0,t.jsx)(n.code,{children:"Task.run"})," calls at the edges of your application (entry points, event handlers, etc.) to maintain the benefits of lazy evaluation:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// \u2713 Good: Run at the application entry point\nasync function main() {\n  const program = buildProgram();\n  const result = await Task.run(program);\n  handleResult(result);\n}\n\n// \u292b Bad: Running tasks inside business logic\nfunction processData(data: Data) {\n  const task = transform(data);\n  return Task.run(task); // Loses composability\n}\n"})})]}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.h3,{id:"handle-both-result-cases",children:"Handle Both Result Cases"}),(0,t.jsx)(n.p,{children:"Always handle both success and error cases:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\nimport { Result } from '@w5s/core';\n\nconst result = await Task.run(myTask);\n\n// \u2713 Good: Explicit handling\nif (Result.isOk(result)) {\n  processValue(result.value);\n} else {\n  handleError(result.error);\n}\n\n// \u292b Bad: Ignoring potential errors\nconst value = (await Task.run(myTask)).value; // Might be undefined!\n"})})]}),"\n",(0,t.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(n.p,{children:"When should I use Task vs Promise?"})}),(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.strong,{children:"Task"})," when:"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You need lazy evaluation"}),"\n",(0,t.jsx)(n.li,{children:"You need cancellation"}),"\n",(0,t.jsxs)(n.li,{children:["You want explicit error handling with ",(0,t.jsx)(n.code,{children:"Result"})]}),"\n",(0,t.jsx)(n.li,{children:"You're building composable async workflows"}),"\n"]}),(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.strong,{children:"Promise"})," when:"]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"You need immediate execution"}),"\n",(0,t.jsx)(n.li,{children:"Inter-operating with APIs that expect Promises"}),"\n",(0,t.jsx)(n.li,{children:"Simple one-off async operations"}),"\n"]})]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:(0,t.jsx)(n.p,{children:"Can I convert between Task and Promise?"})}),(0,t.jsxs)(n.p,{children:["Yes! ",(0,t.jsx)(n.code,{children:"Task.run"})," returns a Promise, and you can wrap Promises in Tasks:"]}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-typescript",children:"// Promise to Task\nconst fromPromise = Task.create(async () => {\n  const value = await somePromise;\n  return Task.ok(value);\n});\n\n// Task to Promise\nconst toPromise = Task.run(someTask);\n"})})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(u,{...e})}):u(e)}},1184(e,n,s){s.d(n,{R:()=>i,x:()=>l});var a=s(4041);const t={},r=a.createContext(t);function i(e){const n=a.useContext(r);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),a.createElement(r.Provider,{value:n},e.children)}},2940(e,n,s){s.d(n,{n:()=>c});var a=s(2436),t=s(2196),r=s(396);const i="badge_qV9W",l="apiLink_d4om";var o=s(1085);function c(e){const n=(0,r.default)(),{siteConfig:s}=n;return(0,o.jsxs)(o.Fragment,{children:[null==e.apiHref?null:(0,o.jsxs)(a.default,{className:l,to:`${s.url}${s.baseUrl.replace(/\/$/,"")}${e.apiHref}`,children:["API ",(0,o.jsx)(t.A,{})]}),["npm-version","npm-license","bundle-size"].map(s=>(({siteConfig:e},n,s)=>{const a={className:i,key:s.badgeType},t=s.badgeStyle??"flat-square";if(null!=n.packageName)switch(s.badgeType){case"bundle-size":return(0,o.jsx)("img",{...a,alt:"Bundle size",src:`https://img.shields.io/bundlephobia/minzip/${encodeURIComponent(n.packageName)}?style=${t}`});case"npm-license":return(0,o.jsx)("img",{...a,alt:"NPM License",src:`https://img.shields.io/npm/l/${encodeURIComponent(n.packageName)}?style=${t}`});case"npm-version":return(0,o.jsx)("img",{...a,alt:"Github version",src:`https://img.shields.io/npm/v/${encodeURIComponent(n.packageName)}?style=${t}`})}return""})(n,e,{badgeType:s}))]})}}}]);