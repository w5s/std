"use strict";(self.webpackChunk_w5s_website=self.webpackChunk_w5s_website||[]).push([[9581],{1184:(e,n,r)=>{r.d(n,{R:()=>l,x:()=>a});var o=r(4041);const s={},t=o.createContext(s);function l(e){const n=o.useContext(t);return o.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),o.createElement(t.Provider,{value:n},e.children)}},6716:(e,n,r)=>{r.r(n),r.d(n,{contentTitle:()=>l,default:()=>i,frontMatter:()=>t,toc:()=>a});var o=r(1085),s=r(1184);const t={},l="W5S HTTP client module (@w5s/http)",a=[{value:"Installation",id:"installation",level:2},{value:"Usage",id:"usage",level:2},{value:"License",id:"license",level:2}];function c(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",img:"img",p:"p",pre:"pre",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsxs)(n.h1,{id:"w5s-http-client-module-w5shttp",children:["W5S HTTP client module ",(0,o.jsx)(n.em,{children:"(@w5s/http)"})]})}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://www.npmjs.com/package/@w5s/http",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/npm/v/@w5s/http.svg?style=flat-square",alt:"NPM Version"})}),"\n",(0,o.jsx)(n.a,{href:"https://github.com/w5s/project-config/blob/HEAD/packages/http/LICENSE",children:(0,o.jsx)(n.img,{src:"https://img.shields.io/badge/license-MIT-green.svg?style=flat-square",alt:"License"})})]}),"\n",(0,o.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-console",children:"npm install @w5s/http\n"})}),"\n",(0,o.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"import { requestSend, HTTPError, ResponseParser, Client } from '@w5s/http';\nimport { Type } from '@w5s/core';\nimport { Task } from '@w5s/task';\nimport { TimeoutError } from '@w5s/error';\n\nconst client = Client();\nconst getText = (id: number) => ({\n  url: `http://localhost/${id}`,\n});\nconst FooObject = Type.Object({\n  foo: Type.boolean,\n});\n\ndeclare function logDebug(message: unknown): Task<void, never>;\ndeclare function logError(message: unknown): Task<void, never>;\n\nexport function program() {\n  const responseTask = requestSend(client, getText(123));\n  const parsed = Task.andThen(responseTask, ResponseParser.json(FooObject));\n  const log = Task.andThen(parsed, (response) => logDebug(response.foo));\n  const handled = Task.orElse(log, (error) => {\n    switch (error.name) {\n      case HTTPError.InvalidURL.errorName: {\n        return logError(`A wrong url was passed. Got ${error.input}`);\n      }\n      case HTTPError.NetworkError.errorName: {\n        return logError('A network error occurred');\n      }\n      case HTTPError.ParserError.errorName: {\n        return logError('A parser error occurred');\n      }\n      case TimeoutError.errorName: {\n        return logError('Operation timed out');\n      }\n      default: {\n        return logError('Unknown');\n      }\n    }\n  });\n\n  return handled;\n}\n\nTask.run(program()); // Result<{ foo: boolean }, FetchNetworkError|FetchParseError>\n"})}),"\n",(0,o.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,o.jsxs)(n.p,{children:[(0,o.jsx)(n.a,{href:"https://github.com/w5s/project-config/blob/HEAD/packages/http/LICENSE",children:"MIT"})," \xa9 Julien Polo ",(0,o.jsx)(n.a,{href:"mailto:julien.polo@gmail.com",children:"julien.polo@gmail.com"})]})]})}function i(e){void 0===e&&(e={});const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}}}]);