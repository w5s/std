"use strict";(globalThis.webpackChunk_w5s_website=globalThis.webpackChunk_w5s_website||[]).push([[3594],{981(e,s,n){n.r(s),n.d(s,{assets:()=>l,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"packages/task/creating-tasks","title":"Creating Tasks","description":"Different ways to create Task instances","source":"@site/docs/packages/3-task/creating-tasks.mdx","sourceDirName":"packages/3-task","slug":"/packages/task/creating-tasks","permalink":"/std/fr/docs/packages/task/creating-tasks","draft":false,"unlisted":false,"editUrl":"https://github.com/w5s/std.git/tree/main/apps/website/docs/packages/3-task/creating-tasks.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Overview","permalink":"/std/fr/docs/packages/task/overview"},"next":{"title":"Composing Tasks","permalink":"/std/fr/docs/packages/task/composing-tasks"}}');var r=n(1085),t=n(1184),c=n(2940);const o={sidebar_position:1},i="Creating Tasks",l={},d=[{value:"Overview",id:"overview",level:2},{value:"Task.create",id:"taskcreate",level:2},{value:"Task.resolve / Task.reject",id:"taskresolve--taskreject",level:2},{value:"Task.ok / Task.error",id:"taskok--taskerror",level:2},{value:"Task.tryCall",id:"tasktrycall",level:2},{value:"Task.from (Advanced)",id:"taskfrom-advanced",level:2},{value:"Accessing Canceler and Subtask Runner",id:"accessing-canceler-and-subtask-runner",level:2}];function k(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(s.header,{children:(0,r.jsx)(s.h1,{id:"creating-tasks",children:"Creating Tasks"})}),"\n",(0,r.jsxs)(s.blockquote,{children:["\n",(0,r.jsx)(s.p,{children:"Different ways to create Task instances"}),"\n"]}),"\n",(0,r.jsx)(c.n,{apiHref:"/api/task/namespace/task"}),"\n",(0,r.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(s.p,{children:["Tasks can be created in multiple ways depending on your use case. The main entry point is ",(0,r.jsx)(s.code,{children:"Task.create"}),", but there are also convenience methods for common patterns."]}),"\n",(0,r.jsx)(s.h2,{id:"taskcreate",children:"Task.create"}),"\n",(0,r.jsx)(s.p,{children:"The primary way to create a task with custom logic:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\n\n// Synchronous computation\nconst syncTask = Task.create(() => Task.ok(42));\n\n// Asynchronous computation\nconst asyncTask = Task.create(async () => {\n  const response = await fetch('/api/data');\n  const data = await response.json();\n  return Task.ok(data);\n});\n\n// With error handling\nconst fetchTask = Task.create(async () => {\n  try {\n    const response = await fetch('/api/data');\n    return Task.ok(await response.json());\n  } catch (error) {\n    return Task.error(new NetworkError({ cause: error }));\n  }\n});\n"})}),"\n",(0,r.jsx)(s.h2,{id:"taskresolve--taskreject",children:"Task.resolve / Task.reject"}),"\n",(0,r.jsx)(s.p,{children:"Create tasks that immediately resolve or reject:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\n\n// A task that resolves with a value\nconst resolvedTask = Task.resolve(42);\n\n// A task that rejects with an error\nconst rejectedTask = Task.reject(new Error('Something went wrong'));\n"})}),"\n",(0,r.jsx)(s.h2,{id:"taskok--taskerror",children:"Task.ok / Task.error"}),"\n",(0,r.jsxs)(s.p,{children:["Shorthand for creating ",(0,r.jsx)(s.code,{children:"Result"})," objects within tasks:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\n\nconst myTask = Task.create(() => {\n  const random = Math.random();\n  if (random > 0.5) {\n    return Task.ok(random);\n  }\n  return Task.error('Too low');\n});\n"})}),"\n",(0,r.jsx)(s.h2,{id:"tasktrycall",children:"Task.tryCall"}),"\n",(0,r.jsx)(s.p,{children:"Safely wrap functions that might throw:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\n\nconst parseJSON = (text: string) =>\n  Task.tryCall(\n    () => JSON.parse(text),\n    (error) => new ParseError({ message: 'Invalid JSON', cause: error })\n  );\n"})}),"\n",(0,r.jsx)(s.h2,{id:"taskfrom-advanced",children:"Task.from (Advanced)"}),"\n",(0,r.jsx)(s.p,{children:"Lower-level API for creating tasks with full control over execution:"}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\n\nconst delayedTask = Task.from(({ resolve, reject, canceler }) => {\n  const timeoutId = setTimeout(() => resolve(42), 1000);\n  \n  // Setup cancellation\n  canceler.current = () => clearTimeout(timeoutId);\n});\n"})}),"\n",(0,r.jsx)(s.h2,{id:"accessing-canceler-and-subtask-runner",children:"Accessing Canceler and Subtask Runner"}),"\n",(0,r.jsxs)(s.p,{children:[(0,r.jsx)(s.code,{children:"Task.create"})," provides access to the canceler and a subtask runner:"]}),"\n",(0,r.jsx)(s.pre,{children:(0,r.jsx)(s.code,{className:"language-typescript",children:"import { Task } from '@w5s/task';\n\nconst complexTask = Task.create(async ({ canceler, run }) => {\n  // Setup cancellation logic\n  canceler.current = () => {\n    console.log('Task was cancelled');\n  };\n  \n  // Run subtasks\n  const result1 = await run(someOtherTask);\n  if (!result1.ok) return Task.error(result1.error);\n  \n  const result2 = await run(anotherTask);\n  return result2.ok ? Task.ok(result2.value) : Task.error(result2.error);\n});\n"})})]})}function p(e={}){const{wrapper:s}={...(0,t.R)(),...e.components};return s?(0,r.jsx)(s,{...e,children:(0,r.jsx)(k,{...e})}):k(e)}},1184(e,s,n){n.d(s,{R:()=>c,x:()=>o});var a=n(4041);const r={},t=a.createContext(r);function c(e){const s=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:c(e.components),a.createElement(t.Provider,{value:s},e.children)}},2940(e,s,n){n.d(s,{n:()=>l});var a=n(2436),r=n(2196),t=n(396);const c="badge_qV9W",o="apiLink_d4om";var i=n(1085);function l(e){const s=(0,t.default)(),{siteConfig:n}=s;return(0,i.jsxs)(i.Fragment,{children:[null==e.apiHref?null:(0,i.jsxs)(a.default,{className:o,to:`${n.url}${n.baseUrl.replace(/\/$/,"")}${e.apiHref}`,children:["API ",(0,i.jsx)(r.A,{})]}),["npm-version","npm-license","bundle-size"].map(n=>(({siteConfig:e},s,n)=>{const a={className:c,key:n.badgeType},r=n.badgeStyle??"flat-square";if(null!=s.packageName)switch(n.badgeType){case"bundle-size":return(0,i.jsx)("img",{...a,alt:"Bundle size",src:`https://img.shields.io/bundlephobia/minzip/${encodeURIComponent(s.packageName)}?style=${r}`});case"npm-license":return(0,i.jsx)("img",{...a,alt:"NPM License",src:`https://img.shields.io/npm/l/${encodeURIComponent(s.packageName)}?style=${r}`});case"npm-version":return(0,i.jsx)("img",{...a,alt:"Github version",src:`https://img.shields.io/npm/v/${encodeURIComponent(s.packageName)}?style=${r}`})}return""})(s,e,{badgeType:n}))]})}}}]);