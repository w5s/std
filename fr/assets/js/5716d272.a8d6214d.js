"use strict";(self.webpackChunk_w5s_website=self.webpackChunk_w5s_website||[]).push([[9747],{8513:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});var s=t(1085),a=t(1184);const i={sidebar_position:5},r="Ref",o={id:"manual/basics/ref",title:"Ref",description:"A type safe and functional way to handle mutable references to value",source:"@site/docs/manual/0-basics/ref.md",sourceDirName:"manual/0-basics",slug:"/manual/basics/ref",permalink:"/std/fr/docs/manual/basics/ref",draft:!1,unlisted:!1,editUrl:"https://github.com/w5s/std.git/tree/main/apps/website/docs/manual/0-basics/ref.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Error",permalink:"/std/fr/docs/manual/basics/error"},next:{title:"String",permalink:"/std/fr/docs/manual/basics/string"}},l={},c=[{value:"Motivation",id:"motivation",level:2},{value:"Usage",id:"usage",level:2},{value:"Read / Write <code>value</code>",id:"read--write-value",level:2},{value:"Coding Guide",id:"coding-guide",level:2},{value:"Always Ref in the following cases",id:"always-ref-in-the-following-cases",level:3},{value:"Always use immutable values everywhere and use <code>Ref</code> for mutations",id:"always-use-immutable-values-everywhere-and-use-ref-for-mutations",level:3},{value:"FAQ",id:"faq",level:2}];function d(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h1,{id:"ref",children:"Ref"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"A type safe and functional way to handle mutable references to value"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"motivation",children:"Motivation"}),"\n",(0,s.jsxs)(n.p,{children:["The ",(0,s.jsx)(n.code,{children:"Ref"})," type represents a mutable value that can be shared over the program."]}),"\n",(0,s.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { Ref } from '@w5s/core';\n\nconst counter = Ref(0);\nconst increment = () => {\n  counter.value = counter.value + 1;\n};\n\nincrement();// counter.value === 1\nincrement();// counter.value === 2\n"})}),"\n",(0,s.jsxs)(n.h2,{id:"read--write-value",children:["Read / Write ",(0,s.jsx)(n.code,{children:"value"})]}),"\n",(0,s.jsxs)(n.p,{children:["It is possible read and / or write ",(0,s.jsx)(n.code,{children:"Ref"})," value, using ",(0,s.jsx)(n.code,{children:"Ref"})," namespace"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const counter = Ref(0);\n\n// Use `Ref.modify` when mapping previous value to new value\nconst increment = () => Ref.modify(counter, (current) => current + 1);\n\n// Use `Ref.write` when setting a value\nconst reset = () => Ref.write(counter, 0);\n"})}),"\n",(0,s.jsx)(n.h2,{id:"coding-guide",children:"Coding Guide"}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.h3,{id:"always-ref-in-the-following-cases",children:"Always Ref in the following cases"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["When you want to mutate a value","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Prefer ",(0,s.jsx)(n.code,{children:"Ref"})," over ",(0,s.jsx)(n.code,{children:"let"})]}),"\n",(0,s.jsxs)(n.li,{children:["\u26a0\ufe0f ",(0,s.jsx)(n.code,{children:"let"})," could be used for internal state, when performances are critical"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"When you want to share a mutable value across multiple parts of your code"}),"\n"]})]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.h3,{id:"always-use-immutable-values-everywhere-and-use-ref-for-mutations",children:["Always use immutable values everywhere and use ",(0,s.jsx)(n.code,{children:"Ref"})," for mutations"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// \u2713 GOOD\ninterface State {\n  readonly name: string,\n  readonly total: number,\n  readonly items: ReadonlyArray<string>,\n}\nconst state = Ref<State>>({\n  name: 'pet store',\n  total: 1,\n  items: ['dog']\n});\nconst addItem = (state: typeof state, item: string) => {\n  Ref.modify(state, (current) => ({\n    ...current,\n    total: current.total + 1,\n    items: [...current.items, item],\n  }));\n};\n\n// \u2713 BAD\nconst state = {\n  total: 1,\n  items: ['dog']\n};\nconst addItem = (state: typeof state, item: string) => {\n  state.total += 1;\n  state.items.push(item);\n};\n"})})]}),"\n",(0,s.jsx)(n.h2,{id:"faq",children:"FAQ"})]})}function u(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},1184:(e,n,t)=>{t.d(n,{R:()=>r,x:()=>o});var s=t(4041);const a={},i=s.createContext(a);function r(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);