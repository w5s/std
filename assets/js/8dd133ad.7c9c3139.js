"use strict";(globalThis.webpackChunk_w5s_website=globalThis.webpackChunk_w5s_website||[]).push([[7215],{1184(e,n,i){i.d(n,{R:()=>t,x:()=>d});var o=i(4041);const s={},r=o.createContext(s);function t(e){const n=o.useContext(r);return o.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),o.createElement(r.Provider,{value:n},e.children)}},2779(e,n,i){i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>o,toc:()=>a});const o=JSON.parse('{"id":"packages/core/option","title":"Option","description":"Option type and functions as replacement for null or undefined","source":"@site/docs/packages/1-core/option.mdx","sourceDirName":"packages/1-core","slug":"/packages/core/option","permalink":"/std/docs/packages/core/option","draft":false,"unlisted":false,"editUrl":"https://github.com/w5s/std.git/tree/main/apps/website/docs/packages/1-core/option.mdx","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Enum","permalink":"/std/docs/packages/core/enum"},"next":{"title":"Result","permalink":"/std/docs/packages/core/result"}}');var s=i(1085),r=i(1184),t=i(2940);const d={sidebar_position:2},c="Option",l={},a=[{value:"Overview",id:"overview",level:2},{value:"Always use <code>Option</code> type when possible",id:"always-use-option-type-when-possible",level:3},{value:"Use precise and meaningful functions",id:"use-precise-and-meaningful-functions",level:3},{value:"Chaining",id:"chaining",level:2},{value:"Matching on values",id:"matching-on-values",level:2},{value:"Method 1:  <code>Option.isNone</code> / <code>Option.isSome</code> (Recommended)",id:"method-1--optionisnone--optionissome-recommended",level:3},{value:"Method 2: <code>=== undefined</code> / <code>!== undefined</code> (i.e. inlining isNone / isSome)",id:"method-2--undefined---undefined-ie-inlining-isnone--issome",level:3},{value:"FAQ",id:"faq",level:2}];function p(e){const n={admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"option",children:"Option"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["Option type and functions as replacement for ",(0,s.jsx)(n.code,{children:"null"})," or ",(0,s.jsx)(n.code,{children:"undefined"})]}),"\n"]}),"\n",(0,s.jsx)(t.n,{apiHref:"/api/core/namespace/option"}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.p,{children:["An ",(0,s.jsx)(n.code,{children:"Option<V>"})," is either a value of type ",(0,s.jsx)(n.code,{children:"V"})," or nothing. An empty value is represented by ",(0,s.jsx)(n.code,{children:"Option.None"})," and a defined value by ",(0,s.jsx)(n.code,{children:"Option.Some(...)"}),". Internally, ",(0,s.jsx)(n.code,{children:"Option.None"})," is ",(0,s.jsx)(n.code,{children:"undefined"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Option } from '@w5s/core';\n\n//                         \u250c\u2500 Type of the optional value\ntype ValueOption = Option<Value>\n"})}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsxs)(n.h3,{id:"always-use-option-type-when-possible",children:["Always use ",(0,s.jsx)(n.code,{children:"Option"})," type when possible"]}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Avoid using ",(0,s.jsx)(n.code,{children:"null"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2713 GOOD\nconst someOptionFunc = () => Option.from(someNullableFunc()); // null -> undefined\n"})}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"Option<V>"})," is more expressive than ",(0,s.jsx)(n.code,{children:"V | undefined"})," and more readable, especially when combining with more union type"]}),"\n"]}),"\n"]})]}),"\n",(0,s.jsxs)(n.admonition,{type:"tip",children:[(0,s.jsx)(n.h3,{id:"use-precise-and-meaningful-functions",children:"Use precise and meaningful functions"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Prefer ",(0,s.jsx)(n.code,{children:"Option.map"})," / ",(0,s.jsx)(n.code,{children:"Option.andThen"})," /  ",(0,s.jsx)(n.code,{children:"Option.orElse"})," when mapping an ",(0,s.jsx)(n.code,{children:"Option"})," to an ",(0,s.jsx)(n.code,{children:"Option"})]}),"\n",(0,s.jsxs)(n.li,{children:["Prefer ternary operators over ",(0,s.jsx)(n.code,{children:"if"})," / ",(0,s.jsx)(n.code,{children:"else"})]}),"\n"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2713 OK\nconst myFunc = <V>(option: Option<V>) => Option.map(option, (value) => /* ... */);\n\n// = OK with caution\nconst myFunc = <V>(option: Option<V>) => Option.isNone(option) ? /* ... */ : /* ... */;\n// \u26a0\ufe0f Be careful to return the same type in both cases\n\n// \u292b BAD\nconst myFunc = <V>(option: Option<V>) => {\n  if (Option.isNone(option)) {\n    return /* ... */ // Risk of returning a different type on both branches\n  }\n  return /* ... */\n};\n"})})]}),"\n",(0,s.jsx)(n.h2,{id:"chaining",children:"Chaining"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"Option.map"}),", ",(0,s.jsx)(n.code,{children:"Option.andThen"})," and ",(0,s.jsx)(n.code,{children:"Option.orElse"})," to transform a given ",(0,s.jsx)(n.code,{children:"Option<T>"})," to ",(0,s.jsx)(n.code,{children:"Option<U>"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Example :"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"function parseNumber(expression: string): Option<number> {\n  const result = parseInt(expression, 10)\n  // Parse a number from a string\n  return Number.isNaN(result) ? Option.None : Option.Some(result);\n}\n\nfunction program(expression: string) {\n  // Convert string to number\n  return parseNumber(expression) // Option<number>\n    // Divide by 2 if not None\n    |> Option.map(#, (_) => _ / 2) // Option<number>\n    // Returns None if previous result was 0, let unchanged otherwise\n    |> Option.andThen(#, (_) => _ === 0 ? Option.None : Option.Some(_)); // Option<number>\n    // Format to string if not None\n    |> Option.map(#, (_) => `Divided by 2 : ${_}`); // Option<string>\n    // Handle Option.None\n    |> Option.orElse(#, () => Option.Some(`Expression is not valid`)); // Option<string>\n}\n"})}),"\n",(0,s.jsx)(n.h2,{id:"matching-on-values",children:"Matching on values"}),"\n",(0,s.jsxs)(n.p,{children:["Use matching to transform ",(0,s.jsx)(n.code,{children:"Option"})," value to any type of value."]}),"\n",(0,s.jsxs)(n.h3,{id:"method-1--optionisnone--optionissome-recommended",children:["Method 1:  ",(0,s.jsx)(n.code,{children:"Option.isNone"})," / ",(0,s.jsx)(n.code,{children:"Option.isSome"})," (Recommended)"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u2713 Best Expressiveness"}),"\n",(0,s.jsx)(n.li,{children:"\u2713 Good performances"}),"\n"]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Option } from '@w5s/core';\n\nconst optionToString = <V>(option: Option<V>): string => Option.isSome(option) ? `Some(${v})` : 'None');\noptionToString(Option.Some(1));// 'Some(1)'\noptionToString(Option.None);// 'None'\n"})}),"\n",(0,s.jsxs)(n.h3,{id:"method-2--undefined---undefined-ie-inlining-isnone--issome",children:["Method 2: ",(0,s.jsx)(n.code,{children:"=== undefined"})," / ",(0,s.jsx)(n.code,{children:"!== undefined"})," (i.e. inlining isNone / isSome)"]}),"\n",(0,s.jsxs)(n.admonition,{type:"note",children:[(0,s.jsx)(n.p,{children:"Not recommended for an application, but only for a third party library."}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"\u26a0\ufe0f Low expressiveness"}),"\n",(0,s.jsx)(n.li,{children:"\u2713 Highest performances"}),"\n",(0,s.jsx)(n.li,{children:"\u2713 No module load overhead"}),"\n"]})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import type { Option } from '@w5s/core';\n\nconst optionToString = <V>(option: Option<V>): string => option === undefined ? `Some(${v})` : 'None';\n"})}),"\n",(0,s.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:(0,s.jsxs)(n.p,{children:["Why choose ",(0,s.jsx)(n.code,{children:"undefined"})," instead of ",(0,s.jsx)(n.code,{children:"null"})," or a variant object (like ",(0,s.jsx)(n.code,{children:"fp-ts"}),") ?"]})}),(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["SOLUTION 1 : Tagged variant ",(0,s.jsx)(n.code,{children:"{ _: 'None' } | { _: 'Some', value, }"})," :"]})}),(0,s.jsx)(n.p,{children:"PROS :"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Generic pattern matching"}),"\n"]}),(0,s.jsx)(n.p,{children:"CONS :"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:['Creates a third "nullable" representation after ',(0,s.jsx)(n.code,{children:"null"})," and ",(0,s.jsx)(n.code,{children:"undefined"})]}),"\n",(0,s.jsxs)(n.li,{children:["Every access to a property or array would have to be converted from ",(0,s.jsx)(n.code,{children:"undefined"})," or ",(0,s.jsx)(n.code,{children:"null"})," to ",(0,s.jsx)(n.code,{children:"None|Some()"})]}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["SOLUTION 2 : ",(0,s.jsx)(n.code,{children:"null"})," as ",(0,s.jsx)(n.code,{children:"None"})," :"]})}),(0,s.jsx)(n.p,{children:"PROS :"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"JSON friendly"}),"\n"]}),(0,s.jsx)(n.p,{children:"CONS :"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"`typeof null == 'object'``"}),"\n",(0,s.jsxs)(n.li,{children:["Every access to a property or array would have to be converted from ",(0,s.jsx)(n.code,{children:"undefined"})," to ",(0,s.jsx)(n.code,{children:"null"})]}),"\n"]}),(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.strong,{children:["SOLUTION 3 : ",(0,s.jsx)(n.code,{children:"undefined"})," as ",(0,s.jsx)(n.code,{children:"None"})," :"]})}),(0,s.jsx)(n.p,{children:"PROS :"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"array and property access are already well typed"}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"typeof undefined == 'undefined'"})}),"\n"]}),(0,s.jsx)(n.p,{children:"CONS :"}),(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"undefined"})," does not exist in JSON"]}),"\n"]})]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:(0,s.jsxs)(n.p,{children:["Why choose the name ",(0,s.jsx)(n.code,{children:"Option"})," over ",(0,s.jsx)(n.code,{children:"Maybe"})," ?"]})}),(0,s.jsxs)(n.p,{children:["It is a matter of preference. ",(0,s.jsx)(n.code,{children:"Rust"})," uses ",(0,s.jsx)(n.code,{children:"Option"}),", ",(0,s.jsx)(n.code,{children:"Haskell"})," uses ",(0,s.jsx)(n.code,{children:"Maybe"}),".\nGenerally speaking, ",(0,s.jsx)(n.code,{children:"W5S"})," packages naming tends to be often aligned with the ",(0,s.jsx)(n.code,{children:"Rust"})," naming when no ECMA equivalent exists."]})]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(p,{...e})}):p(e)}},2940(e,n,i){i.d(n,{n:()=>l});var o=i(2436),s=i(2196),r=i(396);const t="badge_qV9W",d="apiLink_d4om";var c=i(1085);function l(e){const n=(0,r.default)(),{siteConfig:i}=n;return(0,c.jsxs)(c.Fragment,{children:[null==e.apiHref?null:(0,c.jsxs)(o.default,{className:d,to:`${i.url}${i.baseUrl.replace(/\/$/,"")}${e.apiHref}`,children:["API ",(0,c.jsx)(s.A,{})]}),["npm-version","npm-license","bundle-size"].map(i=>(({siteConfig:e},n,i)=>{const o={className:t,key:i.badgeType},s=i.badgeStyle??"flat-square";if(null!=n.packageName)switch(i.badgeType){case"bundle-size":return(0,c.jsx)("img",{...o,alt:"Bundle size",src:`https://img.shields.io/bundlephobia/minzip/${encodeURIComponent(n.packageName)}?style=${s}`});case"npm-license":return(0,c.jsx)("img",{...o,alt:"NPM License",src:`https://img.shields.io/npm/l/${encodeURIComponent(n.packageName)}?style=${s}`});case"npm-version":return(0,c.jsx)("img",{...o,alt:"Github version",src:`https://img.shields.io/npm/v/${encodeURIComponent(n.packageName)}?style=${s}`})}return""})(n,e,{badgeType:i}))]})}}}]);